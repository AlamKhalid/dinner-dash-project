<h1 class='text-center mb-5'>Admin Dashboard</h1>
<%# Restaurants %>
<h3 class='text-center mb-3'>Restaurants</h3>
<%= link_to new_restaurant_path do %>
  <button class='btn btn-info mb-3'><%= fa_icon 'plus'%> Add New Restaurant</button>
<% end %>

<table class='table table-hover'>
  <thead>
    <tr>
      <th scope='col'>ID</th>
      <th scope='col'>Name</th>
      <th scope='col'>Location</th>
      <th scope='col'>Total Items</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @restaurants.each do |restaurant|%>
      <tr>
        <th scope='row'><%= restaurant.id %></th>
        <td><%= restaurant.name %></td>
        <td><%= restaurant.location %></td>
        <td><%= restaurant.items.count %></td>
        <td><%= link_to edit_restaurant_path(restaurant) do%>
          <%= fa_icon 'pencil', class: 'text-warning' %>
        <% end %>
        <%= link_to restaurant, method: :delete, data: {confirm: 'Are you sure?'} do%>
          <%= fa_icon 'trash', class: 'ml-3 text-danger' %>
        <% end %>
        </td>

      </tr>
    <% end %>
  </tbody>
</table>
<%# Categories %>
<h3 class='text-center mt-5 mb-3'>Categories</h3>
<%= link_to new_category_path do %>
  <button class='btn btn-info mb-3'><%= fa_icon 'plus'%> Add New Category</button>
<% end %>
<table class='table table-hover'>
  <thead>
    <tr>
      <th scope='col'>ID</th>
      <th scope='col'>Name</th>
      <th scope='col'>Item Count</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @categories.each do |category|%>
      <tr>
        <th scope='row'><%= category.id %></th>
        <td><%= category.name %></td>
        <td><%= category.items.count %></td>

        <td><%= link_to edit_category_path(category) do%>
          <%= fa_icon 'pencil', class: 'text-warning' %>
        <% end %>
        <%= link_to category, method: :delete, data: {confirm: 'Are you sure?'} do%>
          <%= fa_icon 'trash', class: 'ml-3 text-danger' %>
        <% end %>
        </td>

      </tr>
    <% end %>
  </tbody>
</table>
<%# Orders %>
<h3 class='text-center mt-5 mb-3'>Orders</h3>
<h6><strong>Total number of Orders which are:</strong></h6>
<h6>Ordered: <em><%= Order.where(status: 0).count %></em></h6>
<h6>Paid: <em><%= Order.where(status: 1).count %></em></h6>
<h6>Cancelled: <em><%= Order.where(status: 2).count %></em></h6>
<h6 class='mb-3'>Completed: <em><%= Order.where(status: 3).count %></em></h6>
<%= form_with url: status_filter_orders_path, method: 'put', class: 'd-flex mb-4 align-items-center' do |f| %>
    <span>Browse order by status</span>
    <%
      statuses_array = Order.statuses.to_a.map{|o| [o[0].titleize,o[1]]}
      statuses_array.unshift(['All', -1])
    %>
    <%= select_tag :status, options_for_select(statuses_array), class: 'form-control ml-2 w-15' %>
    <%= f.submit 'Search', class: 'ml-2 btn btn-dark'%>
  <% end %>
<table class='table table-hover'>
  <thead>
    <tr>
      <th scope='col'>ID</th>
      <th scope='col'>Customer Name</th>
      <th scope='col'>Restaurant</th>
      <th scope='col'>Total Price</th>
      <th scope='col'>Status</th>
      <th></th>
    </tr>
  </thead>
  <tbody id='orders-table-body-admin'>
    <%= render @orders %>
  </tbody>
</table>
